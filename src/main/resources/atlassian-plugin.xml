<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
        <param name="plugin-icon">images/gravatarIcon.png</param>
        <param name="plugin-logo">images/gravatarLogo.png</param>
    </plugin-info>

    <resource type="i18n" name="i18n" location="gravatar" />

    <web-resource key="gravatarResource">
        <transformation extension="js">
            <transformer key="jsI18n"/>
        </transformation>
        <resource type="download" name="gravatar.css" location="gravatar.css"/>
        <resource type="download" name="gravatar.js" location="gravatar.js"/>
        <dependency>com.atlassian.auiplugin:dialog2</dependency>
        <context>atl.userprofile</context>
    </web-resource>

    <rest key="gravatarRest" path="/gravatar" version="1.0" />

    <xwork key="gravatarAction">
        <package key="gravatar" extends="default" namespace="/plugins/gravatar">
            <default-interceptor-ref name="defaultStack" />
            <action name="import" class="net.vicox.confluence.plugins.gravatar.action.GravatarImportAction">
                <result name="success" type="redirect">/users/editmyprofilepicture.action</result>
            </action>
        </package>
    </xwork>

    <component key="gravatarImporter" class="net.vicox.confluence.plugins.gravatar.service.ProfilePictureGravatarImportService">
        <interface>net.vicox.confluence.plugins.gravatar.service.GravatarImportService</interface>
    </component>

    <component key="gravatarImportListener" class="net.vicox.confluence.plugins.gravatar.listener.GravatarImportListener"/>
</atlassian-plugin>
